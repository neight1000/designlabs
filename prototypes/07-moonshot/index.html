<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Moonshot Arcade - Production</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto+Mono&display=swap" rel="stylesheet">
<style>
  body {
    margin: 0;
    background: #000;
    color: #fff;
    font-family: 'Roboto Mono', monospace;
    overflow: hidden;
  }
  #gameCanvas {
    display: block;
    margin: 0 auto;
    background: #111;
    border: 2px solid #0f0;
  }
  #score {
    position: absolute;
    top: 10px;
    left: 10px;
    font-size: 18px;
  }
  #titleScreen {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0, 0, 0, 0.9);
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    font-size: 24px;
  }
  button {
    font-family: 'Roboto Mono', monospace;
    font-size: 18px;
    margin-top: 20px;
    padding: 10px 20px;
    cursor: pointer;
    border: 1px solid #fff;
    background: #000;
    color: #fff;
  }
  button:hover {
    background: #222;
  }
</style>
</head>
<body>

<div id="score">Score: 0</div>
<canvas id="gameCanvas" width="600" height="800"></canvas>
<div id="titleScreen">
  <div>Moonshot Arcade</div>
  <button onclick="startGame()">Start Game</button>
</div>

<audio id="shootSound" src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg"></audio>
<audio id="hitSound" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"></audio>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
let player, bullets, enemies, explosions, score, gameRunning;
let enemyDirection = 1;
let enemySpeed = 0.5;
const colors = ['#ff0000', '#ffa500', '#ffff00', '#00ff00', '#00ffff', '#0000ff', '#ff00ff'];

function initGame() {
  player = { x: 280, y: 750, width: 40, height: 20, speed: 5 };
  bullets = [];
  enemies = [];
  explosions = [];
  score = 0;
  gameRunning = true;
  document.getElementById('score').innerText = 'Score: 0';
  spawnEnemies();
  requestAnimationFrame(gameLoop);
}

function spawnEnemies() {
  for (let i = 0; i < 6; i++) {
    for (let j = 0; j < 4; j++) {
      enemies.push({ x: 60 + i * 80, y: 60 + j * 60, width: 40, height: 20, alive: true });
    }
  }
}

function drawPlayer() {
  ctx.fillStyle = '#0f0';
  ctx.beginPath();
  ctx.moveTo(player.x + 20, player.y);
  ctx.lineTo(player.x, player.y + 20);
  ctx.lineTo(player.x + 40, player.y + 20);
  ctx.closePath();
  ctx.fill();
}

function drawBullets() {
  bullets.forEach(b => {
    for (let i = 0; i < 7; i++) {
      ctx.fillStyle = colors[i];
      ctx.fillRect(b.x, b.y + i * 2, 4, 2);
    }
  });
}

function drawEnemies() {
  enemies.forEach(e => {
    if (e.alive) {
      ctx.fillStyle = '#f00';
      ctx.fillRect(e.x + 10, e.y, 20, 20);
      ctx.fillStyle = '#fff';
      ctx.fillRect(e.x + 15, e.y + 5, 2, 2);
      ctx.fillRect(e.x + 23, e.y + 5, 2, 2);
      ctx.fillRect(e.x + 15, e.y + 15, 10, 2);
    }
  });
}

function drawExplosions() {
  explosions.forEach(ex => {
    ctx.fillStyle = ex.color;
    ctx.beginPath();
    ctx.arc(ex.x, ex.y, ex.size, 0, 2 * Math.PI);
    ctx.fill();
  });
}

function updateBullets() {
  bullets = bullets.filter(b => b.y > 0);
  bullets.forEach(b => b.y -= 7);
}

function updateEnemies() {
  let edgeHit = false;
  enemies.forEach(e => {
    if (e.alive) {
      e.x += enemyDirection * enemySpeed;
      if (e.x <= 0 || e.x + e.width >= canvas.width) edgeHit = true;
    }
  });
  if (edgeHit) {
    enemyDirection *= -1;
    enemies.forEach(e => { if (e.alive) e.y += 20; });
  }
}

function updateExplosions() {
  explosions.forEach(ex => ex.size += 1);
  explosions = explosions.filter(ex => ex.size < 20);
}

function checkCollisions() {
  bullets.forEach(b => {
    enemies.forEach(e => {
      if (e.alive && b.x < e.x + e.width && b.x + 4 > e.x && b.y < e.y + e.height && b.y + 10 > e.y) {
        e.alive = false;
        b.y = -10;
        score += 10;
        document.getElementById('score').innerText = 'Score: ' + score;
        document.getElementById('hitSound').play();
        explosions.push({ x: e.x + 20, y: e.y + 10, size: 5, color: '#ff0' });
      }
    });
  });
}

function gameLoop() {
  if (!gameRunning) return;
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  drawPlayer();
  drawBullets();
  drawEnemies();
  drawExplosions();
  updateBullets();
  updateEnemies();
  updateExplosions();
  checkCollisions();
  requestAnimationFrame(gameLoop);
}

document.addEventListener('keydown', e => {
  if (!gameRunning) return;
  if (e.key === 'ArrowLeft' && player.x > 0) player.x -= player.speed;
  if (e.key === 'ArrowRight' && player.x < canvas.width - player.width) player.x += player.speed;
  if (e.key === ' ' || e.key === 'Spacebar') {
    bullets.push({ x: player.x + player.width / 2 - 2, y: player.y });
    document.getElementById('shootSound').play();
  }
});

function startGame() {
  document.getElementById('titleScreen').style.display = 'none';
  initGame();
}
</script>

</body>
</html>

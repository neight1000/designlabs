<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Hip Hop Studio - Intelligent Music Experience</title>
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
            color: #fff;
            font-family: 'Space Mono', monospace;
            font-size: 11px;
            line-height: 1.4;
            transition: all 0.5s ease;
        }

        body.fullscreen {
            padding: 0;
            background: linear-gradient(135deg, #000 0%, #1a1a1a 100%);
            overflow: hidden;
        }

        .ai-hip-hop-player {
            width: 380px;
            background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
            color: #fff;
            border: 2px solid #00ff88;
            padding: 20px;
            border-radius: 12px;
            margin: 0 auto;
            box-shadow: 0 0 30px rgba(0, 255, 136, 0.3);
            position: relative;
            overflow: hidden;
            transition: all 0.5s ease;
        }

        body.fullscreen .ai-hip-hop-player {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            border: none;
            border-radius: 0;
            padding: 40px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .ai-hip-hop-player::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 30%, rgba(0, 255, 136, 0.1) 50%, transparent 70%);
            animation: shimmer 3s infinite;
            pointer-events: none;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .collapse-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 255, 136, 0.2);
            border: 1px solid #00ff88;
            color: #00ff88;
            padding: 6px 12px;
            cursor: pointer;
            font-family: 'Space Mono', monospace;
            font-size: 9px;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        .collapse-btn:hover {
            background: #00ff88;
            color: #000;
        }

        body.fullscreen .collapse-btn {
            top: 20px;
            right: 20px;
            font-size: 12px;
            padding: 12px 20px;
        }

        .ai-status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 12px;
            background: rgba(0, 255, 136, 0.1);
            border-radius: 6px;
            margin-bottom: 16px;
            border: 1px solid rgba(0, 255, 136, 0.3);
        }

        .ai-indicator {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 10px;
            color: #00ff88;
        }

        .ai-pulse {
            width: 8px;
            height: 8px;
            background: #00ff88;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.2); }
        }

        .listening-indicator {
            color: #ff3366;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.3; }
        }

        .app-title {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 4px;
            letter-spacing: 2px;
            text-align: center;
            background: linear-gradient(45deg, #00ff88, #0088ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        body.fullscreen .app-title {
            font-size: 4rem;
            margin-bottom: 1rem;
            letter-spacing: 4px;
        }

        .app-subtitle {
            font-size: 10px;
            opacity: 0.8;
            margin-bottom: 20px;
            letter-spacing: 1px;
            text-align: center;
            color: #888;
        }

        body.fullscreen .app-subtitle {
            font-size: 1.5rem;
            margin-bottom: 3rem;
        }

        .voice-command-section {
            background: rgba(0, 255, 136, 0.05);
            border: 1px solid rgba(0, 255, 136, 0.2);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 16px;
            text-align: center;
        }

        .voice-btn {
            background: linear-gradient(45deg, #00ff88, #0088ff);
            border: none;
            color: #000;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-family: 'Space Mono', monospace;
            font-size: 11px;
            font-weight: 700;
            margin-bottom: 8px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 255, 136, 0.3);
        }

        .voice-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 255, 136, 0.4);
        }

        .voice-btn.listening {
            animation: listening-pulse 0.5s infinite alternate;
        }

        @keyframes listening-pulse {
            0% { transform: scale(1); }
            100% { transform: scale(1.05); }
        }

        .voice-suggestions {
            font-size: 9px;
            color: #888;
            margin-top: 8px;
            line-height: 1.3;
        }

        body.fullscreen .voice-suggestions {
            font-size: 1rem;
        }

        .ai-recommendations {
            background: rgba(136, 136, 136, 0.1);
            border: 1px solid rgba(136, 136, 136, 0.2);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 16px;
        }

        .ai-rec-title {
            font-size: 11px;
            font-weight: 700;
            color: #00ff88;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .ai-rec-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 8px;
            border-radius: 4px;
            margin-bottom: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 10px;
        }

        .ai-rec-item:hover {
            background: rgba(0, 255, 136, 0.1);
            transform: translateX(4px);
        }

        .mood-analyzer {
            background: rgba(255, 51, 102, 0.1);
            border: 1px solid rgba(255, 51, 102, 0.2);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 16px;
        }

        .mood-title {
            font-size: 11px;
            font-weight: 700;
            color: #ff3366;
            margin-bottom: 8px;
        }

        .mood-display {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .mood-emoji {
            font-size: 24px;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        .mood-text {
            font-size: 10px;
            color: #ccc;
        }

        .eq-icon {
            width: 100%;
            height: 50px;
            display: flex;
            align-items: end;
            gap: 3px;
            margin: 16px 0;
            justify-content: center;
        }

        body.fullscreen .eq-icon {
            height: 100px;
            gap: 8px;
            margin: 3rem 0;
        }

        .eq-bar {
            background: linear-gradient(to top, #00ff88, #0088ff);
            border-radius: 2px;
            flex: 1;
            max-width: 8px;
            transition: height 0.1s ease;
            box-shadow: 0 0 10px rgba(0, 255, 136, 0.3);
        }

        body.fullscreen .eq-bar {
            max-width: 16px;
        }

        .eq-icon.playing .eq-bar {
            animation: eq-bounce 0.3s ease-in-out infinite;
        }

        .eq-icon:not(.playing) .eq-bar {
            height: 8px !important;
            animation: none;
        }

        @keyframes eq-bounce {
            0%, 100% {
                transform: scaleY(0.3);
                opacity: 0.4;
            }
            50% {
                transform: scaleY(1);
                opacity: 1;
            }
        }

        .current-track {
            font-size: 12px;
            font-weight: 700;
            margin-bottom: 4px;
            text-align: center;
            color: #00ff88;
        }

        body.fullscreen .current-track {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .current-artist {
            font-size: 10px;
            opacity: 0.8;
            margin-bottom: 16px;
            text-align: center;
            color: #ccc;
        }

        body.fullscreen .current-artist {
            font-size: 1.5rem;
            margin-bottom: 2rem;
        }

        .player-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 16px;
            margin-bottom: 16px;
        }

        body.fullscreen .player-controls {
            gap: 3rem;
            margin-bottom: 3rem;
        }

        .control-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(0, 255, 136, 0.3);
            color: #00ff88;
            padding: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            border-radius: 8px;
            backdrop-filter: blur(10px);
        }

        .control-btn:hover {
            background: rgba(0, 255, 136, 0.2);
            border-color: #00ff88;
            transform: scale(1.1);
        }

        .control-btn.play-pause {
            padding: 16px;
            border-radius: 50%;
            background: linear-gradient(45deg, #00ff88, #0088ff);
            color: #000;
            border: none;
        }

        body.fullscreen .control-btn {
            padding: 2rem;
        }

        body.fullscreen .control-btn.play-pause {
            padding: 2.5rem;
        }

        .control-btn svg {
            width: 18px;
            height: 18px;
            stroke: currentColor;
            fill: none;
            stroke-width: 2;
        }

        body.fullscreen .control-btn svg {
            width: 36px;
            height: 36px;
            stroke-width: 3;
        }

        .progress-section {
            margin: 16px 0;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            margin: 8px 0;
            cursor: pointer;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #00ff88, #0088ff);
            width: 0%;
            transition: width 0.1s ease;
            border-radius: 3px;
        }

        .time-display {
            display: flex;
            justify-content: space-between;
            font-size: 10px;
            opacity: 0.7;
            margin-top: 4px;
        }

        body.fullscreen .time-display {
            font-size: 1.2rem;
            margin-top: 1rem;
        }

        .volume-control {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
            justify-content: center;
        }

        .volume-icon {
            width: 16px;
            height: 16px;
            stroke: currentColor;
            fill: none;
            stroke-width: 2;
            color: #00ff88;
        }

        .volume-slider {
            width: 100px;
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            outline: none;
            -webkit-appearance: none;
            appearance: none;
            border-radius: 2px;
            cursor: pointer;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 16px;
            height: 16px;
            background: #00ff88;
            cursor: pointer;
            border-radius: 50%;
            box-shadow: 0 2px 10px rgba(0, 255, 136, 0.3);
        }

        .volume-slider::-moz-range-thumb {
            width: 16px;
            height: 16px;
            background: #00ff88;
            cursor: pointer;
            border: none;
            border-radius: 50%;
            box-shadow: 0 2px 10px rgba(0, 255, 136, 0.3);
        }

        .ai-chat-section {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(0, 255, 136, 0.2);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 16px;
            max-height: 120px;
            overflow-y: auto;
        }

        .chat-message {
            display: flex;
            align-items: flex-start;
            gap: 8px;
            margin-bottom: 8px;
            font-size: 10px;
            line-height: 1.4;
        }

        .chat-message.user {
            flex-direction: row-reverse;
        }

        .chat-message.user .message-content {
            background: rgba(0, 255, 136, 0.2);
            text-align: right;
        }

        .chat-avatar {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(45deg, #00ff88, #0088ff);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 8px;
            color: #000;
            font-weight: 700;
            flex-shrink: 0;
        }

        .message-content {
            background: rgba(255, 255, 255, 0.1);
            padding: 6px 10px;
            border-radius: 12px;
            max-width: 200px;
        }

        .track-list {
            width: 100%;
            max-height: 120px;
            overflow-y: auto;
            border: 1px solid rgba(0, 255, 136, 0.2);
            border-radius: 8px;
            margin-bottom: 16px;
        }

        .track-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 12px;
            cursor: pointer;
            font-size: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            background: transparent;
            transition: all 0.3s ease;
        }

        .track-item:hover {
            background: rgba(0, 255, 136, 0.1);
            transform: translateX(4px);
        }

        .track-item.active {
            background: rgba(0, 255, 136, 0.2);
            border-left: 3px solid #00ff88;
        }

        .track-name {
            font-weight: 700;
            color: #fff;
        }

        .track-meta {
            font-size: 9px;
            color: #888;
        }

        .ai-insights {
            background: rgba(0, 136, 255, 0.1);
            border: 1px solid rgba(0, 136, 255, 0.2);
            border-radius: 8px;
            padding: 12px;
            margin-top: 16px;
        }

        .insights-title {
            font-size: 11px;
            font-weight: 700;
            color: #0088ff;
            margin-bottom: 8px;
        }

        .insight-item {
            font-size: 9px;
            color: #ccc;
            margin-bottom: 4px;
            padding-left: 12px;
            position: relative;
        }

        .insight-item::before {
            content: '‚Ä¢';
            color: #0088ff;
            position: absolute;
            left: 0;
        }

        .voice-waveform {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 2px;
            margin: 8px 0;
            height: 20px;
        }

        .wave-bar {
            width: 3px;
            background: #00ff88;
            border-radius: 2px;
            height: 4px;
            animation: wave 1s infinite ease-in-out;
        }

        .wave-bar:nth-child(2) { animation-delay: 0.1s; }
        .wave-bar:nth-child(3) { animation-delay: 0.2s; }
        .wave-bar:nth-child(4) { animation-delay: 0.3s; }
        .wave-bar:nth-child(5) { animation-delay: 0.4s; }

        @keyframes wave {
            0%, 100% { height: 4px; }
            50% { height: 16px; }
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 4px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(0, 255, 136, 0.5);
            border-radius: 2px;
        }

        /* Hide elements in fullscreen that don't scale well */
        body.fullscreen .ai-recommendations,
        body.fullscreen .mood-analyzer,
        body.fullscreen .ai-chat-section,
        body.fullscreen .track-list,
        body.fullscreen .ai-insights,
        body.fullscreen .voice-command-section {
            display: none;
        }

        body.fullscreen .player-content {
            text-align: center;
            max-width: 800px;
        }
    </style>
</head>
<body>
    <div class="ai-hip-hop-player">
        <button class="collapse-btn" onclick="toggleFullscreen()">EXPAND</button>
        
        <div class="player-content">
            <div class="ai-status-bar">
                <div class="ai-indicator">
                    <div class="ai-pulse"></div>
                    <span>AI ACTIVE</span>
                </div>
                <div class="listening-indicator" id="listeningStatus" style="display: none;">
                    ‚óè LISTENING
                </div>
            </div>
            
            <h1 class="app-title">AI HIP HOP STUDIO</h1>
            <p class="app-subtitle">INTELLIGENT MUSIC EXPERIENCE</p>
            
            <div class="voice-command-section">
                <button class="voice-btn" id="voiceBtn" onclick="toggleVoiceCommand()">
                    üé§ VOICE COMMAND
                </button>
                <div class="voice-waveform" id="voiceWaveform" style="display: none;">
                    <div class="wave-bar"></div>
                    <div class="wave-bar"></div>
                    <div class="wave-bar"></div>
                    <div class="wave-bar"></div>
                    <div class="wave-bar"></div>
                </div>
                <div class="voice-suggestions">
                    Try: "Play something energetic" ‚Ä¢ "Skip to next track" ‚Ä¢ "What's this song about?"
                </div>
            </div>

            <div class="ai-recommendations">
                <div class="ai-rec-title">
                    <span>ü§ñ</span> AI RECOMMENDATIONS
                </div>
                <div class="ai-rec-item" onclick="playRecommendation(0)">
                    üî• Based on your energy level: Trap Vibes
                </div>
                <div class="ai-rec-item" onclick="playRecommendation(1)">
                    üéµ Similar to your taste: Jazz Fusion Hip Hop
                </div>
            </div>

            <div class="mood-analyzer">
                <div class="mood-title">MOOD ANALYZER</div>
                <div class="mood-display">
                    <div class="mood-emoji" id="moodEmoji">üòé</div>
                    <div class="mood-text" id="moodText">Chill & Focused</div>
                </div>
            </div>
            
            <div class="eq-icon" id="eqIcon">
                <div class="eq-bar" style="height: 8px;"></div>
                <div class="eq-bar" style="height: 16px;"></div>
                <div class="eq-bar" style="height: 12px;"></div>
                <div class="eq-bar" style="height: 20px;"></div>
                <div class="eq-bar" style="height: 6px;"></div>
                <div class="eq-bar" style="height: 14px;"></div>
                <div class="eq-bar" style="height: 18px;"></div>
                <div class="eq-bar" style="height: 10px;"></div>
                <div class="eq-bar" style="height: 22px;"></div>
                <div class="eq-bar" style="height: 7px;"></div>
                <div class="eq-bar" style="height: 15px;"></div>
                <div class="eq-bar" style="height: 19px;"></div>
            </div>
            
            <div class="current-track" id="currentTrack">Lo-Fi Hip Hop Beat</div>
            <div class="current-artist" id="currentArtist">AI Generated ‚Ä¢ Studio Vibes</div>

            <div class="player-controls">
                <button class="control-btn" onclick="previousTrack()">
                    <svg viewBox="0 0 24 24">
                        <polygon points="19,20 9,12 19,4"/>
                        <line x1="5" y1="19" x2="5" y2="5"/>
                    </svg>
                </button>
                <button class="control-btn play-pause" onclick="togglePlayPause()">
                    <svg id="playIcon" viewBox="0 0 24 24">
                        <polygon points="5,3 19,12 5,21"/>
                    </svg>
                    <svg id="pauseIcon" viewBox="0 0 24 24" style="display: none;">
                        <rect x="6" y="4" width="4" height="16"/>
                        <rect x="14" y="4" width="4" height="16"/>
                    </svg>
                </button>
                <button class="control-btn" onclick="nextTrack()">
                    <svg viewBox="0 0 24 24">
                        <polygon points="5,4 15,12 5,20"/>
                        <line x1="19" y1="5" x2="19" y2="19"/>
                    </svg>
                </button>
            </div>

            <div class="progress-section">
                <div class="progress-bar" onclick="seekAudio(event)">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="time-display">
                    <span id="currentTime">0:00</span>
                    <span id="duration">0:00</span>
                </div>
            </div>

            <div class="volume-control">
                <svg class="volume-icon" viewBox="0 0 24 24">
                    <polygon points="11,5 6,9 2,9 2,15 6,15 11,19"/>
                </svg>
                <input type="range" class="volume-slider" id="volumeSlider" min="0" max="100" value="50">
                <svg class="volume-icon" viewBox="0 0 24 24">
                    <polygon points="11,5 6,9 2,9 2,15 6,15 11,19"/>
                    <path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"/>
                </svg>
            </div>

            <div class="ai-chat-section" id="aiChat">
                <div class="chat-message">
                    <div class="chat-avatar">AI</div>
                    <div class="message-content">
                        Welcome! I've analyzed your music taste and found some perfect matches. Ready to explore?
                    </div>
                </div>
            </div>

            <div class="track-list" id="trackList">
                <div class="track-item active" data-track="0">
                    <div>
                        <div class="track-name">Lo-Fi Hip Hop Beat</div>
                        <div class="track-meta">Chill ‚Ä¢ 2:30 ‚Ä¢ 95% match</div>
                    </div>
                </div>
                <div class="track-item" data-track="1">
                    <div>
                        <div class="track-name">Boom Bap Classic</div>
                        <div class="track-meta">Energetic ‚Ä¢ 3:15 ‚Ä¢ 89% match</div>
                    </div>
                </div>
                <div class="track-item" data-track="2">
                    <div>
                        <div class="track-name">Trap Vibes</div>
                        <div class="track-meta">Aggressive ‚Ä¢ 2:45 ‚Ä¢ 92% match</div>
                    </div>
                </div>
                <div class="track-item" data-track="3">
                    <div>
                        <div class="track-name">Jazz Fusion Hip Hop</div>
                        <div class="track-meta">Smooth ‚Ä¢ 3:30 ‚Ä¢ 88% match</div>
                    </div>
                </div>
                <div class="track-item" data-track="4">
                    <div>
                        <div class="track-name">Chill Wave Beats</div>
                        <div class="track-meta">Relaxed ‚Ä¢ 2:15 ‚Ä¢ 94% match</div>
                    </div>
                </div>
                <div class="track-item" data-track="5">
                    <div>
                        <div class="track-name">Underground Flow</div>
                        <div class="track-meta">Raw ‚Ä¢ 3:45 ‚Ä¢ 87% match</div>
                    </div>
                </div>
            </div>

            <div class="ai-insights">
                <div class="insights-title">üß† AI INSIGHTS</div>
                <div class="insight-item">This track uses 808 drums at 85 BPM</div>
                <div class="insight-item">Key: F# minor, perfect for late-night coding</div>
                <div class="insight-item">Similar to artists: Nujabes, J Dilla</div>
                <div class="insight-item">Recommended listening time: Evening/Night</div>
            </div>
        </div>

    </div>

    <!-- Audio element for actual playback -->
    <audio id="audioPlayer" preload="metadata">
        <source src="track1.mp3" type="audio/mpeg">
        <source src="track2.mp3" type="audio/mpeg">
        <source src="track3.mp3" type="audio/mpeg">
        <source src="track4.mp3" type="audio/mpeg">
        <source src="track5.mp3" type="audio/mpeg">
        <source src="track6.mp3" type="audio/mpeg">
    </audio>

    <script>
        let isPlaying = false;
        let currentTrackIndex = 0;
        let isListening = false;
        let eqAnimationInterval;
        let progressUpdateInterval;
        let currentTime = 0;
        let duration = 150; // Default 2:30 in seconds
        let volume = 0.5;

        const tracks = [
            { 
                title: "Lo-Fi Hip Hop Beat", 
                artist: "AI Generated ‚Ä¢ Studio Vibes", 
                duration: 150, // 2:30 in seconds
                mood: "Chill & Focused",
                emoji: "üòé",
                match: "95%",
                insights: [
                    "This track uses 808 drums at 85 BPM",
                    "Key: F# minor, perfect for late-night coding",
                    "Similar to artists: Nujabes, J Dilla",
                    "Recommended listening time: Evening/Night"
                ]
            },
            { 
                title: "Boom Bap Classic", 
                artist: "AI Generated ‚Ä¢ Studio Vibes", 
                duration: 195, // 3:15 in seconds
                mood: "Energetic & Motivated",
                emoji: "üî•",
                match: "89%",
                insights: [
                    "Classic boom bap pattern at 90 BPM",
                    "Key: C major, uplifting and energetic",
                    "Inspired by 90s East Coast hip hop",
                    "Perfect for workouts and motivation"
                ]
            },
            { 
                title: "Trap Vibes", 
                artist: "AI Generated ‚Ä¢ Studio Vibes", 
                duration: 165, // 2:45 in seconds
                mood: "Aggressive & Intense",
                emoji: "üí•",
                match: "92%",
                insights: [
                    "Modern trap beats with 808 slides",
                    "Key: D minor, dark and intense",
                    "Hi-hats at double-time for energy",
                    "Great for gaming and high-focus tasks"
                ]
            },
            { 
                title: "Jazz Fusion Hip Hop", 
                artist: "AI Generated ‚Ä¢ Studio Vibes", 
                duration: 210, // 3:30 in seconds
                mood: "Smooth & Sophisticated",
                emoji: "üé∑",
                match: "88%",
                insights: [
                    "Jazz chord progressions with hip hop drums",
                    "Key: Bb major, sophisticated and smooth",
                    "Features virtual saxophone and piano",
                    "Ideal for creative work and relaxation"
                ]
            },
            { 
                title: "Chill Wave Beats", 
                artist: "AI Generated ‚Ä¢ Studio Vibes", 
                duration: 135, // 2:15 in seconds
                mood: "Relaxed & Dreamy",
                emoji: "üåô",
                match: "94%",
                insights: [
                    "Ambient textures with subtle percussion",
                    "Key: A minor, contemplative and peaceful",
                    "Layered with ethereal pad sounds",
                    "Perfect for meditation and focus work"
                ]
            },
            { 
                title: "Underground Flow", 
                artist: "AI Generated ‚Ä¢ Studio Vibes", 
                duration: 225, // 3:45 in seconds
                mood: "Raw & Authentic",
                emoji: "üé§",
                match: "87%",
                insights: [
                    "Lo-fi production with vinyl crackle",
                    "Key: E minor, gritty and underground",
                    "Features chopped-up soul samples",
                    "Reminiscent of 90s underground hip hop"
                ]
            }
        ];

        const aiResponses = [
            "Great choice! This track has been optimized for your current mood.",
            "I've noticed you prefer tracks with strong bass lines. This one's perfect!",
            "Based on your listening patterns, you might also like our Jazz Fusion track.",
            "The AI engine detects you're in a creative flow state. Perfect timing!",
            "This track's BPM matches your current energy level perfectly.",
            "Analyzing your preferences... This should boost your productivity!",
            "Your musical taste is evolving! This recommendation is 92% accurate.",
            "Perfect choice for this time of day. Your circadian rhythm analysis suggests this tempo."
        ];

        const voiceCommands = [
            { 
                trigger: ["play", "start", "music"], 
                response: "Starting playback! I've selected the perfect track for you.",
                action: () => { if (!isPlaying) togglePlayPause(); }
            },
            { 
                trigger: ["stop", "pause"], 
                response: "Pausing playback. Your listening session has been saved.",
                action: () => { if (isPlaying) togglePlayPause(); }
            },
            { 
                trigger: ["next", "skip"], 
                response: "Skipping to the next track in your AI-curated playlist.",
                action: () => nextTrack()
            },
            { 
                trigger: ["previous", "back"], 
                response: "Going back to the previous track.",
                action: () => previousTrack()
            },
            { 
                trigger: ["energetic", "pump", "workout"], 
                response: "Switching to high-energy mode! Playing Boom Bap Classic.",
                action: () => { currentTrackIndex = 1; updateTrack(); if (!isPlaying) togglePlayPause(); }
            },
            { 
                trigger: ["chill", "relax", "calm"], 
                response: "Activating chill mode. Playing something smooth for you.",
                action: () => { currentTrackIndex = 0; updateTrack(); if (!isPlaying) togglePlayPause(); }
            },
            { 
                trigger: ["trap", "hard", "intense"], 
                response: "Switching to trap vibes! This should get your adrenaline pumping.",
                action: () => { currentTrackIndex = 2; updateTrack(); if (!isPlaying) togglePlayPause(); }
            },
            { 
                trigger: ["jazz", "smooth", "sophisticated"], 
                response: "Perfect! Playing our Jazz Fusion track - smooth and sophisticated.",
                action: () => { currentTrackIndex = 3; updateTrack(); if (!isPlaying) togglePlayPause(); }
            }
        ];

        // Audio Context for generating simple tones (fallback)
        let audioContext;
        let oscillator;
        let gainNode;

        function initAudioContext() {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                gainNode = audioContext.createGain();
                gainNode.connect(audioContext.destination);
                gainNode.gain.value = volume;
            }
        }

        function createTone(frequency = 440) {
            if (oscillator) {
                oscillator.stop();
            }
            
            oscillator = audioContext.createOscillator();
            const gain = audioContext.createGain();
            
            oscillator.connect(gain);
            gain.connect(gainNode);
            
            oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);
            oscillator.type = 'sine';
            
            // Create a simple beat pattern
            gain.gain.setValueAtTime(0.3, audioContext.currentTime);
            
            oscillator.start();
            
            // Create rhythm by modulating volume
            const beatInterval = setInterval(() => {
                if (isPlaying) {
                    gain.gain.setValueAtTime(0.1, audioContext.currentTime);
                    gain.gain.setValueAtTime(0.3, audioContext.currentTime + 0.1);
                } else {
                    clearInterval(beatInterval);
                }
            }, 500); // Beat every 500ms
        }

        function randomizeEqBars() {
            const bars = document.querySelectorAll('.eq-bar');
            bars.forEach((bar, index) => {
                // Create more realistic EQ movement based on frequency bands
                const baseHeight = 8 + (index % 3) * 4; // Base height varies by "frequency"
                const variation = Math.random() * 15 + 5; // Random variation
                const newHeight = Math.max(4, baseHeight + (isPlaying ? variation : 0));
                bar.style.height = `${newHeight}px`;
            });
        }

        function startEqAnimation() {
            if (!eqAnimationInterval) {
                document.getElementById('eqIcon').classList.add('playing');
                eqAnimationInterval = setInterval(randomizeEqBars, 100);
            }
        }

        function stopEqAnimation() {
            if (eqAnimationInterval) {
                clearInterval(eqAnimationInterval);
                eqAnimationInterval = null;
                document.getElementById('eqIcon').classList.remove('playing');
            }
        }

        function loadTrack(index) {
            if (tracks[index]) {
                const audioPlayer = document.getElementById('audioPlayer');
                audioPlayer.src = `track${index + 1}.mp3`;
                audioPlayer.load();
            }
        }

        function updateProgress() {
            const audioPlayer = document.getElementById('audioPlayer');
            if (audioPlayer.duration) {
                const progress = (audioPlayer.currentTime / audioPlayer.duration) * 100;
                document.getElementById('progressFill').style.width = `${progress}%`;
                document.getElementById('currentTime').textContent = formatTime(audioPlayer.currentTime);
                document.getElementById('duration').textContent = formatTime(audioPlayer.duration);
            }
        }

        function startProgressUpdate() {
            if (!progressUpdateInterval) {
                progressUpdateInterval = setInterval(updateProgress, 100);
            }
        }

        function stopProgressUpdate() {
            if (progressUpdateInterval) {
                clearInterval(progressUpdateInterval);
                progressUpdateInterval = null;
            }
        }

        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = Math.floor(seconds % 60);
            return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;
        }

        function seekAudio(event) {
            const audioPlayer = document.getElementById('audioPlayer');
            const progressBar = event.currentTarget;
            const rect = progressBar.getBoundingClientRect();
            const clickX = event.clientX - rect.left;
            const newProgress = clickX / rect.width;
            audioPlayer.currentTime = newProgress * audioPlayer.duration;
        }

        function toggleFullscreen() {
            document.body.classList.toggle('fullscreen');
            const collapseBtn = document.querySelector('.collapse-btn');
            
            if (document.body.classList.contains('fullscreen')) {
                collapseBtn.textContent = 'MINIMIZE';
            } else {
                collapseBtn.textContent = 'EXPAND';
            }
        }

        function toggleVoiceCommand() {
            const voiceBtn = document.getElementById('voiceBtn');
            const listeningStatus = document.getElementById('listeningStatus');
            const voiceWaveform = document.getElementById('voiceWaveform');
            
            if (!isListening) {
                isListening = true;
                voiceBtn.classList.add('listening');
                voiceBtn.textContent = 'üé§ LISTENING...';
                listeningStatus.style.display = 'block';
                voiceWaveform.style.display = 'flex';
                
                // Simulate voice recognition after 2-4 seconds
                const listenTime = 2000 + Math.random() * 2000;
                setTimeout(() => {
                    processVoiceCommand();
                }, listenTime);
            }
        }

        function processVoiceCommand() {
            const voiceBtn = document.getElementById('voiceBtn');
            const listeningStatus = document.getElementById('listeningStatus');
            const voiceWaveform = document.getElementById('voiceWaveform');
            
            isListening = false;
            voiceBtn.classList.remove('listening');
            voiceBtn.textContent = 'üé§ VOICE COMMAND';
            listeningStatus.style.display = 'none';
            voiceWaveform.style.display = 'none';
            
            // Simulate processing a random voice command
            const randomCommand = voiceCommands[Math.floor(Math.random() * voiceCommands.length)];
            
            // Add user message first
            addChatMessage("Play something that matches my mood", true);
            
            // Then AI response
            setTimeout(() => {
                addChatMessage(randomCommand.response);
                randomCommand.action();
            }, 500);
        }

        function addChatMessage(message, isUser = false) {
            const chatSection = document.getElementById('aiChat');
            const messageDiv = document.createElement('div');
            messageDiv.className = `chat-message ${isUser ? 'user' : ''}`;
            
            if (isUser) {
                messageDiv.innerHTML = `
                    <div class="chat-avatar">YOU</div>
                    <div class="message-content">${message}</div>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div class="chat-avatar">AI</div>
                    <div class="message-content">${message}</div>
                `;
            }
            
            chatSection.appendChild(messageDiv);
            chatSection.scrollTop = chatSection.scrollHeight;
            
            // Remove old messages if too many
            const messages = chatSection.querySelectorAll('.chat-message');
            if (messages.length > 6) {
                messages[0].remove();
            }
        }

        function updateMood() {
            const currentTrack = tracks[currentTrackIndex];
            document.getElementById('moodEmoji').textContent = currentTrack.emoji;
            document.getElementById('moodText').textContent = currentTrack.mood;
        }

        function updateInsights() {
            const currentTrack = tracks[currentTrackIndex];
            const insightsContainer = document.querySelector('.ai-insights');
            const insightsHTML = currentTrack.insights.map(insight => 
                `<div class="insight-item">${insight}</div>`
            ).join('');
            
            insightsContainer.innerHTML = `
                <div class="insights-title">üß† AI INSIGHTS</div>
                ${insightsHTML}
            `;
        }

        function updateTrack() {
            const currentTrack = tracks[currentTrackIndex];
            document.getElementById('currentTrack').textContent = currentTrack.title;
            document.getElementById('currentArtist').textContent = currentTrack.artist;
            
            // Reset progress
            currentTime = 0;
            duration = currentTrack.duration;
            document.getElementById('progressFill').style.width = '0%';
            document.getElementById('currentTime').textContent = '0:00';
            document.getElementById('duration').textContent = formatTime(duration);
            
            updateMood();
            updateInsights();
            
            // Update active track in list
            document.querySelectorAll('.track-item').forEach((item, index) => {
                if (index === currentTrackIndex) {
                    item.classList.add('active');
                } else {
                    item.classList.remove('active');
                }
            });
            
            // Add AI response about track change
            const randomResponse = aiResponses[Math.floor(Math.random() * aiResponses.length)];
            setTimeout(() => addChatMessage(randomResponse), 800);
        }

        function playRecommendation(index) {
            if (index === 0) {
                currentTrackIndex = 2; // Trap Vibes
                addChatMessage("Great choice! Trap Vibes is perfect for your current energy level.");
            } else {
                currentTrackIndex = 3; // Jazz Fusion
                addChatMessage("Excellent selection! Jazz Fusion will enhance your creative flow.");
            }
            updateTrack();
            if (!isPlaying) {
                togglePlayPause();
            }
        }

        function togglePlayPause() {
            const playIcon = document.getElementById('playIcon');
            const pauseIcon = document.getElementById('pauseIcon');
            
            if (isPlaying) {
                // Pause
                playIcon.style.display = 'block';
                pauseIcon.style.display = 'none';
                isPlaying = false;
                stopEqAnimation();
                stopProgressUpdate();
                
                if (oscillator) {
                    oscillator.stop();
                    oscillator = null;
                }
            } else {
                // Play
                initAudioContext();
                playIcon.style.display = 'none';
                pauseIcon.style.display = 'block';
                isPlaying = true;
                startEqAnimation();
                startProgressUpdate();
                
                // Create a simple tone that represents the track
                const frequencies = [220, 247, 262, 294, 330, 349]; // Different "tracks"
                createTone(frequencies[currentTrackIndex] || 220);
            }
        }

        function nextTrack() {
            currentTrackIndex = (currentTrackIndex + 1) % tracks.length;
            updateTrack();
            if (isPlaying) {
                // Stop current tone and start new one
                if (oscillator) {
                    oscillator.stop();
                    oscillator = null;
                }
                const frequencies = [220, 247, 262, 294, 330, 349];
                createTone(frequencies[currentTrackIndex] || 220);
            }
        }

        function previousTrack() {
            currentTrackIndex = (currentTrackIndex - 1 + tracks.length) % tracks.length;
            updateTrack();
            if (isPlaying) {
                // Stop current tone and start new one
                if (oscillator) {
                    oscillator.stop();
                    oscillator = null;
                }
                const frequencies = [220, 247, 262, 294, 330, 349];
                createTone(frequencies[currentTrackIndex] || 220);
            }
        }

        // Track list click handlers
        document.querySelectorAll('.track-item').forEach((item, index) => {
            item.addEventListener('click', () => {
                currentTrackIndex = index;
                updateTrack();
                if (isPlaying) {
                    if (oscillator) {
                        oscillator.stop();
                        oscillator = null;
                    }
                    const frequencies = [220, 247, 262, 294, 330, 349];
                    createTone(frequencies[currentTrackIndex] || 220);
                }
            });
        });

        // Volume control
        document.getElementById('volumeSlider').addEventListener('input', (e) => {
            volume = e.target.value / 100;
            if (gainNode) {
                gainNode.gain.value = volume;
            }
        });

        // Initialize player
        document.addEventListener('DOMContentLoaded', () => {
            updateTrack();
            
            // Add welcome message after a short delay
            setTimeout(() => {
                addChatMessage("üéµ AI Music Engine initialized! I'm ready to curate the perfect playlist for you.");
            }, 1000);
            
            // Simulate AI analyzing user preferences
            setTimeout(() => {
                addChatMessage("üìä Analyzing your music preferences... I've detected you enjoy lo-fi and chill hop. Perfect!");
            }, 3000);
        });

        // Add some dynamic AI recommendations that update over time
        setInterval(() => {
            if (!isListening && Math.random() < 0.3) { // 30% chance every 15 seconds
                const suggestions = [
                    "üí° Based on the time of day, I recommend switching to something more energetic.",
                    "üéØ Your listening pattern suggests you're in a flow state. Want me to queue similar tracks?",
                    "üìà I've noticed you prefer tracks in minor keys. Shall I adjust your recommendations?",
                    "üß† Your productivity peaks detected! This is the perfect time for focus music.",
                    "üéµ New AI-generated track suggestion based on your recent preferences!"
                ];
                
                const randomSuggestion = suggestions[Math.floor(Math.random() * suggestions.length)];
                addChatMessage(randomSuggestion);
            }
        }, 15000);

    </script>
</body>
</html>
